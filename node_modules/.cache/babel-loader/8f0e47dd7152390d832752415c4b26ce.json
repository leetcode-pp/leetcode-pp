{"remainingRequest":"/Users/luxiaopeng/github/leetcode-pp/node_modules/babel-loader/lib/index.js!/Users/luxiaopeng/github/leetcode-pp/node_modules/eslint-loader/index.js??ref--13-0!/Users/luxiaopeng/github/leetcode-pp/src/apis/user.js","dependencies":[{"path":"/Users/luxiaopeng/github/leetcode-pp/src/apis/user.js","mtime":1648364288715},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/cache-loader/dist/cjs.js","mtime":1582876651155},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/babel-loader/lib/index.js","mtime":1614915260754},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/eslint-loader/index.js","mtime":1584094539526}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAnLi9yZXF1ZXN0JzsKZXhwb3J0IGZ1bmN0aW9uIGxvZ291dCgpIHsKICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgcmV0dXJuIHJlcXVlc3QoewogICAgdXJsOiAnL2FwaS92MS91c2VyL2xvZ291dCcKICB9KTsKfQp2YXIgVE9LRU5fUEVST0lEID0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwOwpleHBvcnQgZnVuY3Rpb24gZ2V0VXNlckluZm8oY29kZSkgewogIHJldHVybiByZXF1ZXN0KHsKICAgIHVybDogIi9hcGkvdjEvdXNlcj9jb2RlPSIuY29uY2F0KGNvZGUgfHwgJycpCiAgfSkudGhlbihmdW5jdGlvbiAocikgewogICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIEpTT04uc3RyaW5naWZ5KHsKICAgICAgZXhwaXJlQXQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgVE9LRU5fUEVST0lELAogICAgICB2YWx1ZTogci50b2tlbgogICAgfSkpOwogICAgcmV0dXJuIHI7CiAgfSk7Cn0="},{"version":3,"sources":["/Users/luxiaopeng/github/leetcode-pp/src/apis/user.js"],"names":["request","logout","window","localStorage","removeItem","url","TOKEN_PEROID","getUserInfo","code","then","r","setItem","JSON","stringify","expireAt","Date","getTime","value","token"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,WAApB;AACA,OAAO,SAASC,MAAT,GAAkB;AACvBC,EAAAA,MAAM,CAACC,YAAP,CAAoBC,UAApB,CAA+B,OAA/B;AACA,SAAOJ,OAAO,CAAC;AACbK,IAAAA,GAAG,EAAE;AADQ,GAAD,CAAd;AAGD;AACD,IAAMC,YAAY,GAAG,KAAK,EAAL,GAAU,EAAV,GAAe,EAAf,GAAoB,IAAzC;AACA,OAAO,SAASC,WAAT,CAAqBC,IAArB,EAA2B;AAChC,SAAOR,OAAO,CAAC;AACbK,IAAAA,GAAG,8BAAuBG,IAAI,IAAI,EAA/B;AADU,GAAD,CAAP,CAEJC,IAFI,CAEC,UAAAC,CAAC,EAAI;AACXR,IAAAA,MAAM,CAACC,YAAP,CAAoBQ,OAApB,CACE,OADF,EAEEC,IAAI,CAACC,SAAL,CAAe;AACbC,MAAAA,QAAQ,EAAE,IAAIC,IAAJ,GAAWC,OAAX,KAAuBV,YADpB;AAEbW,MAAAA,KAAK,EAAEP,CAAC,CAACQ;AAFI,KAAf,CAFF;AAOA,WAAOR,CAAP;AACD,GAXM,CAAP;AAYD","sourcesContent":["import request from './request'\nexport function logout() {\n  window.localStorage.removeItem('token')\n  return request({\n    url: '/api/v1/user/logout'\n  })\n}\nconst TOKEN_PEROID = 30 * 24 * 60 * 60 * 1000\nexport function getUserInfo(code) {\n  return request({\n    url: `/api/v1/user?code=${code || ''}`\n  }).then(r => {\n    window.localStorage.setItem(\n      'token',\n      JSON.stringify({\n        expireAt: new Date().getTime() + TOKEN_PEROID,\n        value: r.token\n      })\n    )\n    return r\n  })\n}\n"]}]}