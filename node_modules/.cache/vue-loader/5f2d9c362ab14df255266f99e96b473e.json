{"remainingRequest":"/Users/luxiaopeng/github/leetcode-pp/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/luxiaopeng/github/leetcode-pp/src/views/ProblemDetail.vue?vue&type=style&index=0&id=6abcd3ea&lang=less&scoped=true&","dependencies":[{"path":"/Users/luxiaopeng/github/leetcode-pp/src/views/ProblemDetail.vue","mtime":1648364288931},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/css-loader/dist/cjs.js","mtime":1594812194251},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1631347730543},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/postcss-loader/src/index.js","mtime":1582876651724},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/less-loader/dist/cjs.js","mtime":1584094546781},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/cache-loader/dist/cjs.js","mtime":1582876651155},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/vue-loader/lib/index.js","mtime":1631347730543}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovZGVlcC8gcCA+IGNvZGUgewogIGRpc3BsYXk6IGlubGluZTsKfQpoMi5zdWJ0aXRsZSB7CiAgbWFyZ2luLXRvcDogNTBweDsKICBtYXJnaW4tYm90dG9tOiAzMHB4OwogIGZvbnQtc2l6ZTogMzJweDsKICBmb250LXdlaWdodDogYm9sZDsKfQoubWF4LXdpZHRoLTgwMCB7CiAgbWF4LXdpZHRoOiA4MDBweDsKICBtYXJnaW46IDMwcHggYXV0bzsKfQoudGV4dC1hbGlnbi1sZWZ0IHsKICB0ZXh0LWFsaWduOiBsZWZ0Owp9Ci5jb250YWluZXIgewogIG1heC13aWR0aDogMTA4MHB4OwogIG1hcmdpbjogMzBweCBhdXRvOwp9Ci5kZXNjLAouc29sdXRpb24gewogIG1heC13aWR0aDogODAwcHg7CiAgbWFyZ2luOiAyMHB4IGF1dG87Cn0KcHJlIHsKICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7CiAgd29yZC13cmFwOiBicmVhay13b3JkOwp9Ci5zcGlubmVyLWNvbnRhaW5lciB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGhlaWdodDogMTAwJTsKfQoudGFncyB7CiAgbWFyZ2luLWJvdHRvbTogMzBweDsKfQo="},{"version":3,"sources":["ProblemDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProblemDetail.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div v-if=\"loading\" class=\"spinner-container\">\n      <a-spin size=\"large\"></a-spin>\n    </div>\n    <div v-if=\"!loading\" class=\"container\">\n      <div class=\"max-width-800\">\n        <a-alert\n          v-if=\"hasError\"\n          message=\"很抱歉，目前请求无法执行，请稍候再试。\"\n          type=\"error\"\n        />\n      </div>\n      <h1>{{ title }}</h1>\n      <p class=\"tags\">\n        <a-tag\n          v-for=\"(label, index) in labels\"\n          :key=\"label.id\"\n          :color=\"randomColor(index)\"\n          label.name\n          >{{ label.name }}</a-tag\n        >\n      </p>\n      <h2 class=\"subtitle\">题目详情</h2>\n      <div class=\"desc text-align-left\" v-html=\"desc\"></div>\n      <h2 class=\"subtitle\">题解</h2>\n      <div class=\"solution text-align-left\" v-html=\"solution\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getGithubContent } from '../apis/github'\nimport MarkdownIt from 'markdown-it'\nimport hljs from 'highlight.js'\nimport 'highlight.js/styles/github.css'\nconst md = new MarkdownIt()\nconst URL_REGEX = /(\\s+)(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/g\n/** \n  The above regex will match the following cases\n  http://www.foufos.gr\n  https://www.foufos.gr\n  http://foufos.gr\n  http://www.foufos.gr/kino\n  http://werer.gr\n  www.foufos.gr\n  www.mp3.com\n  www.t.co\n  http://t.co\n  http://www.t.co\n  https://www.t.co\n  www.aa.com\n  http://aa.com\n  http://www.aa.com\n  https://www.aa.com\n */\nconst ERROR_MSG_DISPLAY_DURATION = 5000\nconst COLORS = [\n  'pink',\n  'red',\n  'orange',\n  'green',\n  'cyan',\n  'blue',\n  'purple',\n  '#87d068'\n]\n\nfunction getSolution(comments) {\n  // 优先选择 lucifer 的，如果没有，选第一个好了。\n  const lucifer = comments.find(\n    comment => comment.user.login === 'azl397985856'\n  )\n  if (lucifer) return lucifer.body\n  return comments[0] ? comments[0].body : '暂无'\n}\nexport default {\n  data() {\n    return {\n      loading: true,\n      hasError: false,\n      title: '',\n      desc: '',\n      createDate: '',\n      issueUrl: '',\n      solution: '',\n      prettified: false,\n      labels: []\n    }\n  },\n  methods: {\n    randomColor(index) {\n      return COLORS[index % COLORS.length]\n    },\n    showError() {\n      this.hasError = true\n      setTimeout(() => {\n        this.hasError = false\n      }, ERROR_MSG_DISPLAY_DURATION)\n    },\n    async getProlem() {\n      try {\n        const res = await getGithubContent(\n          `https://api.github.com/repos/azl397985856/leetcode/issues/${this.$route.params.id}?githubClientId=e6dafd54b96fcef74c56&githubClientSecret=64ec9c15ee608c201f0b5f4b3fde881b07d2bc31`\n        )\n        this.loading = false\n        this.title = res.title\n        this.desc = md.render(this.addLinkMarkdown(res.body))\n        this.createDate = res.created_at\n        this.issueUrl = res.comments_url\n        this.labels = res.labels\n      } catch (error) {\n        console.log(error)\n        this.showError()\n        this.loading = false\n      }\n    },\n    addLinkMarkdown(content) {\n      return content.replace(URL_REGEX, '<$2>')\n    },\n    async getSolution() {\n      try {\n        const comments = await getGithubContent(this.issueUrl)\n        this.loading = false\n        this.solution = getSolution(comments)\n\n        // Markdown to HTML\n        this.solution = md.render(this.solution)\n      } catch (error) {\n        console.log(error)\n        this.showError()\n        this.loading = false\n      }\n    }\n  },\n  async mounted() {\n    await this.getProlem()\n    if (this.title) {\n      await this.getSolution()\n      hljs.configure({ useBR: false })\n      document.querySelectorAll('code').forEach(block => {\n        hljs.highlightBlock(block)\n      })\n      document.querySelectorAll('img').forEach(block => {\n        // block.style.maxWidth = '340px'\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ p > code {\n  display: inline;\n}\nh2.subtitle {\n  margin-top: 50px;\n  margin-bottom: 30px;\n  font-size: 32px;\n  font-weight: bold;\n}\n.max-width-800 {\n  max-width: 800px;\n  margin: 30px auto;\n}\n.text-align-left {\n  text-align: left;\n}\n.container {\n  max-width: 1080px;\n  margin: 30px auto;\n}\n.desc,\n.solution {\n  max-width: 800px;\n  margin: 20px auto;\n}\npre {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.spinner-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n}\n.tags {\n  margin-bottom: 30px;\n}\n</style>\n"]}]}