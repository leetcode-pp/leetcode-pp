{"remainingRequest":"/Users/luxiaopeng/github/leetcode-pp/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/luxiaopeng/github/leetcode-pp/src/views/SolutionDetail.vue?vue&type=style&index=0&id=53a5835d&lang=less&scoped=true&","dependencies":[{"path":"/Users/luxiaopeng/github/leetcode-pp/src/views/SolutionDetail.vue","mtime":1648364288935},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/css-loader/dist/cjs.js","mtime":1594812194251},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1631347730543},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/postcss-loader/src/index.js","mtime":1582876651724},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/less-loader/dist/cjs.js","mtime":1584094546781},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/cache-loader/dist/cjs.js","mtime":1582876651155},{"path":"/Users/luxiaopeng/github/leetcode-pp/node_modules/vue-loader/lib/index.js","mtime":1631347730543}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovZGVlcC8gcCA+IGNvZGUgewogIGRpc3BsYXk6IGlubGluZTsKfQoucGFnaW5hdGlvbi1idXR0b24gewogIG1hcmdpbjogMTBweDsKfQoud3JhcHBlciB7CiAgd2lkdGg6IDEwMCU7CgogIGgyLnN1YnRpdGxlIHsKICAgIG1hcmdpbi10b3A6IDUwcHg7CiAgICBtYXJnaW4tYm90dG9tOiAzMHB4OwogICAgZm9udC1zaXplOiAzMnB4OwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgfQogIC5tYXgtd2lkdGgtODAwIHsKICAgIG1heC13aWR0aDogODAwcHg7CiAgICBtYXJnaW46IDMwcHggYXV0bzsKICB9CiAgLnRleHQtYWxpZ24tbGVmdCB7CiAgICB0ZXh0LWFsaWduOiBsZWZ0OwogIH0KICAuY29udGFpbmVyIHsKICAgIG1heC13aWR0aDogMTA4MHB4OwogICAgbWFyZ2luOiAzMHB4IGF1dG87CiAgfQogIC5kZXNjIHsKICAgIG1hcmdpbjogMjBweCAxMHB4OwogIH0KICBwcmUgewogICAgd2hpdGUtc3BhY2U6IHByZS13cmFwOwogICAgd29yZC13cmFwOiBicmVhay13b3JkOwogIH0KICAuc3Bpbm5lci1jb250YWluZXIgewogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIGhlaWdodDogMTAwJTsKICB9CiAgLnRhZ3MgewogICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICB9Cn0K"},{"version":3,"sources":["SolutionDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SolutionDetail.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    切换主题：<a-select\n      :value=\"currentTheme\"\n      style=\"width: 240px\"\n      @change=\"handleThemeChange\"\n    >\n      <a-select-option value=\"empty\">\n        默认主题\n      </a-select-option>\n      <a-select-option value=\"blue\">\n        蓝调\n      </a-select-option>\n      <a-select-option value=\"bluew\">\n        蓝调（无网格）\n      </a-select-option>\n      <a-select-option value=\"purple\">\n        紫调\n      </a-select-option>\n      <a-select-option value=\"purplew\">\n        紫调（无网格）\n      </a-select-option>\n      <a-select-option value=\"wechat\">\n        wechat\n      </a-select-option>\n      <a-select-option value=\"vue\">\n        vue\n      </a-select-option>\n    </a-select>\n    <div class=\"outline\" v-show=\"false\"></div>\n    <div class=\"wrapper\" id=\"nice\">\n      <div v-if=\"loading\" class=\"spinner-container\">\n        <a-spin size=\"large\"></a-spin>\n      </div>\n      <div v-if=\"!loading\" class=\"container\">\n        <div class=\"max-width-800\">\n          <a-alert\n            v-if=\"hasError\"\n            message=\"很抱歉，目前请求无法执行，请稍候再试。\"\n            type=\"error\"\n          />\n        </div>\n        <h2 class=\"subtitle\" v-if=\"type === '0'\">题解详情</h2>\n        <div class=\"desc text-align-left\" v-html=\"desc\"></div>\n      </div>\n    </div>\n    <!-- <a-button size=\"small\" type=\"primary\" @click=\"handleCopyClick\"\n      >复制内容</a-button\n    > -->\n\n    <div class=\"pagination\" v-if=\"type === '2' || type === '3'\">\n      <a-button\n        class=\"pagination-button\"\n        :disabled=\"disabledPre\"\n        size=\"small\"\n        type=\"primary\"\n        @click=\"handlePreClick\"\n        >上一页</a-button\n      >\n      <a-button\n        size=\"small\"\n        :disabled=\"disabledNext\"\n        class=\"pagination-button\"\n        type=\"primary\"\n        @click=\"handleNextClick\"\n        >下一页</a-button\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Base64 } from 'js-base64'\nimport MarkdownIt from 'markdown-it'\nimport markdownItLatex from '@iktakahiro/markdown-it-katex'\nimport markdownItImplicitFigures from 'markdown-it-implicit-figures'\n// import DocumentOutliner from 'document-outliner'\n\nimport highlightLines from '../utils/highlight-lines'\nimport hljs from '../utils/langHighlight'\nimport 'highlight.js/styles/github.css'\nimport { getLectureDetails, getDailyProblemSolution } from '@/apis/91'\nimport markdownItSpan from '../utils/markdown-it-span'\nimport markdownItMultiquote from '../utils/markdown-it-multiquote'\nimport markdownItImageflow from '../utils/markdown-it-imageflow'\nimport markdownItLinkfoot from '../utils/markdown-it-linkfoot'\nimport markdownItLi from '../utils/markdown-it-li'\nimport markdownItRemovepre from '../utils/markdown-it-removepre'\nimport markdownItTableContainer from '../utils/markdown-it-table-container'\nimport { replaceStyle } from '../utils/style'\nimport { copyToClipboard } from '../utils/browser'\nimport theme from '../themes/index'\nimport { getStorage, setStorage } from '../utils/storage'\nimport { getGithubContent } from '../apis/github'\n\nimport students from './91/students-talk'\n\nimport '../themes/atom-one-dark.less'\nimport '../themes/base.less'\nimport '../themes/outline-base.less'\n\nconst { blue, purple, wechat, vue } = theme\nconst options = {\n  html: true\n}\nconst md = new MarkdownIt(options)\nmd.use(markdownItImplicitFigures, { figcaption: true })\nmd.use(highlightLines)\nmd.use(markdownItLatex)\nmd.use(markdownItSpan)\nmd.use(markdownItMultiquote)\nmd.use(markdownItImageflow)\nmd.use(markdownItLinkfoot)\nmd.use(markdownItLi)\nmd.use(markdownItRemovepre)\nmd.use(markdownItTableContainer)\n\nmd.options.highlight = (str, lang) => {\n  if (lang === undefined || lang === '') {\n    lang = 'bash'\n  }\n  // 加上custom则表示自定义样式，而非微信专属，避免被remove pre\n  if (hljs.getLanguage(lang)) {\n    const formatted = hljs\n      .highlight(lang, str, true)\n      .value.replace(/\\n/g, '<br/>') // 换行用br表示\n      .replace(/\\s/g, '&nbsp;') // 用nbsp替换空格\n      .replace(/span&nbsp;/g, 'span ') // span标签修复\n    return (\n      '<pre class=\"custom\"><code class=\"hljs\">' + formatted + '</code></pre>'\n    )\n  }\n}\n\nconst URL_REGEX = /(\\s+)(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/g\nconst LINK_REGRX = /\\[(.*)\\]\\(\\.\\.\\/(.*)\\)/g\nconst WAREHOURSE_ADDRESS =\n  'https://github.com/azl397985856/leetcode/raw/master/'\nconst ERROR_MSG_DISPLAY_DURATION = 5000\n\nexport default {\n  data() {\n    return {\n      // 0 : 题解(github api)\n      // 1: 专题(github api)\n      // 2: 91讲义 (leetcode-pp-node api)\n      // 3: 91每日一题题解(leetcode-pp-node api)\n      // 4: 个人访谈\n      // 5: github reader\n      currentTheme: 'empty',\n      type: 0,\n      loading: true,\n      hasError: false,\n      desc: '',\n      prettified: false,\n      labels: []\n    }\n  },\n  computed: {\n    disabledPre() {\n      return this.type === '2'\n        ? ['1001', '2001', '3001', '4001'].includes(this.$route.query.id)\n        : +this.$route.query.id <= 1\n    },\n    disabledNext() {\n      return +this.$route.query.id >= this.$route.query.max_id\n    }\n  },\n  methods: {\n    handleCopyClick() {\n      try {\n        copyToClipboard(this.desc)\n        this.$message.success({\n          message: '复制成功'\n        })\n      } catch (err) {\n        this.$message.error({\n          message: '浏览器太旧了~'\n        })\n        console.log(err)\n      }\n    },\n    handleNextClick() {\n      this.$router.push({\n        path: 'solutionDetail',\n        query: {\n          ...this.$route.query,\n          id: +this.$route.query.id + 1\n        }\n      })\n    },\n    handlePreClick() {\n      this.$router.push({\n        path: 'solutionDetail',\n        query: {\n          ...this.$route.query,\n          id: +this.$route.query.id - 1\n        }\n      })\n    },\n    handleThemeChange(v) {\n      this.currentTheme = v\n      if (v === 'purple' || v === 'purplew') {\n        replaceStyle(\n          'theme-style',\n          purple({ withoutGrid: v === 'purplew' }).content\n        )\n      }\n      if (v === 'blue' || v === 'bluew') {\n        replaceStyle(\n          'theme-style',\n          blue({ withoutGrid: v === 'bluew' }).content\n        )\n      }\n      if (v === 'empty') {\n        replaceStyle('theme-style', '')\n      }\n      if (v === 'wechat') {\n        replaceStyle('theme-style', wechat().content)\n      }\n      if (v === 'vue') {\n        replaceStyle('theme-style', vue().content)\n      }\n      setStorage('theme', v)\n    },\n    showError(error) {\n      this.hasError = true\n      setTimeout(() => {\n        this.hasError = false\n      }, ERROR_MSG_DISPLAY_DURATION)\n\n      throw error\n    },\n    async getSolution() {\n      try {\n        if (this.type === '2') {\n          const { content } = await getLectureDetails(this.$route.query.id)\n\n          this.loading = false\n          this.desc = md.render(content || '正在快马加鞭书写中~')\n        } else if (this.type === '3') {\n          const { content } = await getDailyProblemSolution(\n            this.$route.query.id\n          )\n          this.loading = false\n          this.desc = md.render(content)\n        } else if (this.type === '4') {\n          //\n          this.loading = false\n          const student = students.find(\n            student => student.id === this.$route.query.id\n          )\n          if (student) {\n            this.desc = md.render(student.body)\n          } else {\n            this.showError({\n              message: 'id 不存在'\n            })\n          }\n        } else if (this.type === '1') {\n          const res = await getGithubContent(this.$route.query.url)\n          this.loading = false\n          this.desc = md.render(\n            this.addLinkMarkdown(Base64.decode(res.content))\n          )\n        } else if (this.type === '5') {\n          const res = await getStorage('github-reader')\n          this.loading = false\n          this.desc = md.render(res?.result?.value)\n        } else {\n          this.loading = false\n          this.showError({\n            message: '不支持的 type'\n          })\n        }\n      } catch (error) {\n        this.loading = false\n        this.showError(error)\n      }\n    },\n    addLinkMarkdown(content) {\n      // 仓库的 markdown 中仓库地址用的相对地址，所以需要 replace 成绝对地址\n      return content\n        .replace(URL_REGEX, '<$2>')\n        .replace(LINK_REGRX, `[$1](${WAREHOURSE_ADDRESS}$2)`)\n    }\n  },\n  async mounted() {\n    this.type = this.$route.query.type.toString()\n    await this.getSolution()\n    // const outliner = new DocumentOutliner('#nice')\n    // outliner.makeList('.outline', {\n    //   link: true,\n    //   listType: 'ul',\n    //   listClassName: 'list-group',\n    //   itemClassName: 'list-group-item',\n    //   anchorName: 'heading-$1'\n    // })\n    // hljs.configure({ useBR: false })\n    // document.querySelectorAll('code').forEach(block => {\n    //   hljs.highlightBlock(block)\n    // })\n    // document.querySelectorAll('img').forEach(block => {\n    //   // block.style.maxWidth = '340px'\n    //   block.style.width = '100%'\n    // })\n    getStorage('theme').then(v => {\n      if (v?.result?.value) {\n        this.handleThemeChange(v?.result?.value)\n        this.currentTheme = v?.result?.value\n      }\n    })\n    document\n      .getElementsByClassName('wrapper')[0]\n      .querySelectorAll('a')\n      .forEach(block => {\n        block.target = '_blank'\n      })\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ p > code {\n  display: inline;\n}\n.pagination-button {\n  margin: 10px;\n}\n.wrapper {\n  width: 100%;\n\n  h2.subtitle {\n    margin-top: 50px;\n    margin-bottom: 30px;\n    font-size: 32px;\n    font-weight: bold;\n  }\n  .max-width-800 {\n    max-width: 800px;\n    margin: 30px auto;\n  }\n  .text-align-left {\n    text-align: left;\n  }\n  .container {\n    max-width: 1080px;\n    margin: 30px auto;\n  }\n  .desc {\n    margin: 20px 10px;\n  }\n  pre {\n    white-space: pre-wrap;\n    word-wrap: break-word;\n  }\n  .spinner-container {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n  }\n  .tags {\n    margin-bottom: 30px;\n  }\n}\n</style>\n"]}]}